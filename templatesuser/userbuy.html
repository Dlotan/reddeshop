{% extends "userbase.html" %}
{% block title %}
Buy
{% endblock %}
{% block javascript %}
	<script>
		$(document).ready(function(){
			var product_price_string = $('#productprice').attr('price')
			var shipping_cost_string = $('#country').find(':selected').attr('shipping_cost')
			$('#shippingcost').text(shipping_cost_string + ' EUR')
			$('#sumcost').text(parseFloat(shipping_cost_string) + parseFloat(product_price_string) + ' EUR')
		  	$('#country').on('change', function() {
				var product_price_string = $('#productprice').attr('price')
				var shipping_cost_string = $(this).find(':selected').attr('shipping_cost')
				$('#shippingcost').text(shipping_cost_string + ' EUR')
				$('#sumcost').text((parseFloat(shipping_cost_string) + parseFloat(product_price_string)) + ' EUR')
			});
		});
	</script>
{% endblock %}
{% block main_content %}
  <div class="buy-container">
    <div class="w-container">
      <div class="w-row">
      Produkt Name: {{product.name}}<br>
      {% set price = product.price / 100.0 %}
      <table border = "0">
      <tr>
      	<td>Produkt Preis: </td><td><div id="productprice" price="{{'%0.2f'| format(price|float)}}">{{'%0.2f'| format(price|float)}} EUR</div></td>
      </tr>
      <tr>
      	<td>Versandkosten:</td><td><div id="shippingcost">0.00 EUR</div></td>
      <tr>
       	<td>----------</td><td>-----------</td>
      </tr>
      <tr>
      	<td>Gesamt:</td><td><div id="sumcost">0.00 EUR</div></td>
      </tr>
      </tr>
      </table>
      <br><br>
        <form method="post">
        <table border="0">
        	<tr>
			<td>Vorname</td><td><input type="text" name = "first_name" value = "{{params['first_name']}}"></td><td class="error">{{params['first_name_error']}}</td>
			</tr>
			<tr>
			<td>Nachname</td><td><input type="text" name = "last_name" value = "{{params['last_name']}}"></td><td class="error">{{params['last_name_error']}}</td>
			</tr>
			<tr>
			<td>Strasse</td><td><input type="text" name = "street" value = "{{params['street']}}"></td><td class="error">{{params['street_error']}}</td>
			</tr>
			<tr>
			<td>Hausnummer</td><td><input type="text" name = "street_number" value = "{{params['street_number']}}"></td><td class="error">{{params['street_number_error']}}</td>
			</tr>
			<tr>
			<td>Plz</td><td><input type="text" name = "plz" value = "{{params['plz']}}"></td><td class="error">{{params['plz_error']}}</td>
			</tr>
			<tr>
			<td>Stadt</td><td><input type="text" name = "city" value = "{{params['city']}}"></td><td class="error">{{params['city_error']}}</td>
			</tr>
			<tr>
			<td>Land</td><td><input type="text" name = "country" value = "{{params['country']}}"></td><td class="error">{{params['country_error']}}</td>
			</tr>
			<tr>
			<td>E-Mail</td><td><input type="text" name = "email" value = "{{params['email']}}"></td><td class="error">{{params['email_error']}}</td>
			</tr>
			<tr>
			<td>E-Mail wiederholen</td><td><input type="text" name = "email2" value = "{{params['email2']}}"></td><td class="error">{{params['email2_error']}}</td>
			</tr>
		</table>
		<br>
		Shipping:
		<select name="shipping_region" size="1" id="country">
			<option value = "germany" shipping_cost = "0.00">Deutschland +0.00 EUR</option>
			<option value = "eu" shipping_cost = "7.00">EU +7.00 EUR</option>
			<option value = "worldwide" shipping_cost = "15.00">Worldwide +15.00 EUR</option>
		</select>
		<br>
		<br>
		Size:
		<select name="subproduct_name" size="1">
			{% for subproduct in subproducts %}
				<option>{{subproduct.value}}</option>
			{% endfor %}
		</select>
		<br>
		{{params['subproduct_error']}}
		<br>
		Bezahlart:<br>
		<input type="radio" name="paymethod" value="paypal" checked> Paypal<br>
		<input type="radio" name="paymethod" value="ueberweisung"> Ueberweisung<br>
		<input type="radio" name="paymethod" value="persoenlich"> Persoenlich Dagersheim<br>
		{{params['paymethod_error']}}
		<br>
		<input type="submit">
        </form>
        <br>
        <br>
      </div>
    </div>
  </div>
{% endblock %}